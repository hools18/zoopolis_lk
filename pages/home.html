<template>
    <div class="page">
        <div class="page-content">
			<div class="head"></div>
		</div>
    </div>
</template>
<script>

export default (props, { $f7, $f7router, $el, $update, $on, $onBeforeMount, $onMounted, $onBeforeUpdate, $onUpdated, $onBeforeUnmount, $onUnmounted, $store }) => {
	$on("pageInit", function (e, page) {

	});
	$on('pageAfterIn', function (e, page) {
        if($f7.form.getFormData('token')){
            $store.dispatch('checkToken').then(function(checkToken) {
                if(!$store.state.profile.hasSubscribe) {
                    location.href = '/select-subscription'
                } else {
                    location.href = '/main'
                }
            });
		} else {
            location.href = '/login'
		}
    });

    return $render;
}
</script>
